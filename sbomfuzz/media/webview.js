const r=acquireVsCodeApi();let l=null,a=null;function u(e={}){l=e.onRustAnalysisDone||(()=>{}),a=e.onCargoProjectRoot||(()=>{}),window.addEventListener("message",t=>{const n=t.data;switch(n.command){case"cargoProjectRoot":a&&a(n.path);break;case"rustAnalysisDone":s("Rust analysis completed successfully"),l&&l(n.results||[]);break;default:console.warn("Unhandled message from extension:",n);break}}),o({command:"getCargoProjectRoot"})}function o(e){r.postMessage(e)}function s(e){o({command:"log",message:e})}let i=null;const c=document.getElementById("entry-list"),d=document.getElementById("path-display-container");function m(e){const t=e.nextElementSibling;e.classList.toggle("expanded")?t.style.display="block":t.style.display="none"}const g=document.querySelectorAll(".collapsible-header");g.forEach(e=>{s("Setting up collapsible header:",e.textContent),e.addEventListener("click",()=>{s("Collapsible header clicked:",e.textContent),m(e)})});u({onCargoProjectRoot:e=>{e?(s("ðŸ“¦ Got Cargo project root: "+e),i=e,d.innerHTML=`Cargo Project Root: ${e}`):d.innerHTML="No Cargo project found."},onRustAnalysisDone:e=>{s("Rendering function results"),c.innerHTML="";for(const t of e){const n=document.createElement("div");n.className="function-button",n.innerHTML=`
        <div style="font-weight:bold; margin-bottom:4px;">
          ${t.functionModulePath}::${t.functionName}
        </div>
        <div>
          ${t.functionLocation.filePath.replace(i,"")}
        </div>
      `,n.onclick=()=>{o({command:"openLocation",filePath:t.functionLocation.filePath,offset:t.functionLocation.offset})},c.appendChild(n)}}});document.getElementById("entry-button").addEventListener("click",()=>{o({command:"requestEntries",target:"none"})});document.getElementById("start-analyzer").addEventListener("click",()=>{o({command:"runAnalyzer",target:"none",projectPath:i})});document.getElementById("test-vis").addEventListener("click",()=>{o({command:"testVisualization"})});
