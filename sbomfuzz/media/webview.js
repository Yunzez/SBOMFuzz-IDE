const r=acquireVsCodeApi();let a=null,s=null;function d(e={}){a=e.onRustAnalysisDone||(()=>{}),s=e.onCargoProjectRoot||(()=>{}),window.addEventListener("message",t=>{const n=t.data;switch(n.command){case"cargoProjectRoot":s&&s(n.path);break;case"rustAnalysisDone":c("Rust analysis completed successfully"),a&&a(n.results||[]);break;default:console.warn("Unhandled message from extension:",n);break}}),o({command:"getCargoProjectRoot"})}function o(e){r.postMessage(e)}function c(e){o({command:"log",message:e})}let i=null;const u=document.getElementById("entry-list"),l=document.getElementById("path-display-container");d({onCargoProjectRoot:e=>{e?(c("ðŸ“¦ Got Cargo project root: "+e),i=e,l.innerHTML=`Cargo Project Root: ${e}`):l.innerHTML="No Cargo project found."},onRustAnalysisDone:e=>{c("Rendering function results");for(const t of e){const n=document.createElement("div");n.className="function-button",n.innerHTML=`
        <div style="font-weight:bold; margin-bottom:4px;">
          ${t.functionName}::${t.functionName}
        </div>
        <div>
          ${t.functionLocation.filePath.replace(i,"")}
        </div>
      `,n.onclick=()=>{o({command:"openLocation",filePath:t.functionLocation.filePath,offset:t.functionLocation.offset})},u.appendChild(n)}}});document.getElementById("entry-button").addEventListener("click",()=>{o({command:"requestEntries",target:"none"})});document.getElementById("start-analyzer").addEventListener("click",()=>{o({command:"runAnalyzer",target:"none",projectPath:i})});document.getElementById("test-vis").addEventListener("click",()=>{o({command:"testVisualization"})});
